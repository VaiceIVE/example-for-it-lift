# Общее описание решения
Наш веб-сервис от Профилум - это сервис, который анализирует активность пользователей в 
социцальных сетях и на основе полученных данных определяет их профессиональные интересы и склонности. Анализ происходит посредством сбора информации с помощью API социальных сетей, после чего данные передаются ML модели сервиса, которая сравнивает полученные данные с датасетом профессий и выводит наиболее вероятные совпадения с той или иной специальностью.

# Бизнес логика проекта
В ходе разработки проекта были выявлены следующие ограничения:
1. Целевой аудиторией являются подростки возрастом от 13 до 17 лет, которые испытывают потребность в нахождении оптимальной профессии, соотвествующей интересам и возможностям.
2. Пользователями проекта являются подростки и аналитики. Функционал аналитиков заключается в возможности сбора статистику о наиболее популярных направлениях, о проценте правильности предсказания будущей професии и т.д., а также в добавлении, удалении, обновлении, изменении данных об отраслях, профессиях, специальностях и их описании.
3. Основным источником данных являются социальные сети и онлайн-сервисы, в которых происходит основная интернет-активность пользователей.
4. Проект должен обеспечивать защиту данных пользователей, их конфедициальность и соответствовать законодательным и иным нормативно правовым актам.
5. Использование алгоритмов машинного обучения является основным инструментом анализа активности пользователей.
6. Результатом проекта должен быть работающий веб-сервис.

# Системная логика проекта
## Архитектура проекта
![display:block;margin:auto|](https://cdn.discordapp.com/attachments/993888805708906496/1185574757572296736/drawio_4.png?ex=65901b89&is=657da689&hm=d6f273cc066679350f38e85ce2dff3dcefe501af5412662e400984a323d39b2a&)
Рис. 1 - Графическое отображение архитектуры проекта
## ML
### Описание технической реализации
На данный момент в модели используется алгоритм KNearestNeighbors.Для этого были созданы  парсеры специальностей для расширения текущей информационной базы. В итоге благодаря собранному стеку, имеется возможность автоматически редактировать данные и расширять их, не задумываясь сильной предобработке. Т.е. если какая-то профессия сильно меняется мы просто добавляем новую информацию о ней.

Дальше мы можем рассматривать текста как тензора или как вектора, и сравнивать к какому направлению студент больше склоняется. Таким образом мы представляем множество специальностей как N-мерное пространство.  Так-же поступаем и со студентом, но его уже рассматриваем как объект в этом N-мерном пространстве.
Далее мы смотрим косинусное расстояние между студентом и другими объектами в нашем пространстве, находя на сколько близко (угол между векторами) и сильно (длина векторов) студент склоняется к тому или иному направлению.
### Методика работы алгоритма
Метод k-ближайших соседей с метрикой косинусного расстояния. Так как работа происходит с большими итерациями то у нас не затухают градиенты, помимо этого у модели очень высокая расширяемость,(можно поменять датасет, не переобучая модель). Вдобавок модель на залочится на одном векторе, так как у нас большие даннные то мы смотрим пространство напряженности и определяем точку напряженности и находим наиболее близлежайшую точку профессии.

### Описание алгоритма
- Парсим с сайтов текстовые описания студента и нормализуем их;
- Векторизуем описания;
- Получаем результирующий вектор для описаний (просто сумируем вектора)
- Сравниваем с результирующим вектором профессии/специальности, по косинусному растоянию;
- Выбираем максимально близкие для студента профессии/специальности по полученным расстояниям.

![display:block;margin:auto|](https://cdn.discordapp.com/attachments/993888805708906496/1185840531025186876/YAKUTIAMODEL.drawio_2.png?ex=6591130e&is=657e9e0e&hm=940d194d74be8613c8aeb3529f03c36bf786c8fa35930ec6f44d041f01443725&)

Рис.2 - Пошаговое отображение модели

### Описание сущностей

Студент описывается двумя векторами: 
- вектор специальности $1\times N_{\text{число специальностей}}$
- вектор професий $1\times N_{\text{число професий}}$ 

Профессии описываются тензорами размерности $64 \times 1024$

Специальности описываются тензорами размерности $128 \times 1024$

![display:block;margin:auto|](https://cdn.discordapp.com/attachments/993888805708906496/1185890782020902952/alg.png?ex=659141db&is=657eccdb&hm=db4352da63e4558c8de420f58139acbda05613d96897c45bbc4f069dd58e2deb&)
Рис. 3 - Подробное пошаговое отображение модели
## Описание взаимодействия с API

### Описание ресурсных файлов

- Переменные доступа (`./DATA/secrets.json`) - содержит все переменные для работы со внешними API:
    - "vk" - описание переменных для VK:
        - access_token - access_token для VK api;
        - phone - телефон от аккаунта для работы с VK api;
        - pass - пароль от аккаунта для работы с VK api;

### Функции

- `/leaderid/get_works` - получение профессий соответствующих абитуриенту по LeaderID:
    - Входные данные
        - user_id - id аккаунта;
        - n_of_works - число возвращаемых работ;
    - Выходные данные: словарь с полями:
        - "name" - <list<str>> - перечень професий, упорядоченный от наиболее подходящей к наименее;
        - "value" - <list<float>> - степень близости студента к професии (индекс степени соответствует индексу профессии)

- `/leaderid/get_spec` - получение специальностей соответствующих абитуриенту по LeaderID:
    - Входные данные
        - user_id - id аккаунта;
        - n_of_works - число возвращаемых специальностей;
    - Выходные данные: список специальностей, упорядоченный от наиболее подходящей к наименее;
- `/vk/simple_analize_interests` - получение профессий соответствующих абитуриенту по VK:
    - Входные данные
        - user_id - id аккаунта;
        - n_of_works - число возвращаемых работ;
    - Выходные данные: словарь с полями:
        - "name" - <list<str>> - перечень професий, упорядоченный от наиболее подходящей к наименее;
        - "value" - <list<float>> - степень близости студента к професии (индекс степени соответствует индексу профессии)

- `/vk/get_spec` - получение специальностей соответствующих абитуриенту по VK:
    - Входные данные
        - user_id - id аккаунта;
        - n_of_works - число возвращаемых специальностей;
    - Выходные данные: список специальностей, упорядоченный от наиболее подходящей к наименее;

- `/extract/` - получение специальностей соответствующих абитуриенту по перечню професий:
    - Входные данные
        - словарь с полями:
            - "name" - <list<str>> - перечень професий, упорядоченный от наиболее подходящей к наименее;
            - "value" - <list<float>> - степень близости студента к професии (индекс степени соответствует индексу профессии)
    - Выходные:
        - Словарь с парами название профессий - список специальностей соответствующих данной профессии.

### Описание данных
- `small_description_vectors.pt` - эмбединги описаний професий;
- `spec_desc_vec.pt` - эмбединги описаний специальностей;
- `large_spec_desc_processed.json` - датасет расширенных описаний специальностей. *Полученны с https://vuz.edunetwork.ru/specs/;
- `less_semantic_words.txt` - список стоп слов;
- `work_spec_desc.json` - пары названий работ и описаний профессий и специальностей;
- `spec_num_name_pairs.csv` - пары специальность - номер специальности

## Frontend
Frontend сервиса написан на React + Ts, под капотом использует: 
<ul>
  <li>State-manager MobX;</li>
  <li>React-hook-form;</li>
  <li>React-router-dom;</li>
  <li>UI библиотека Mantine;</li>
  <li>Sass modules.</li>
</ul>
<br/> 
Архитектура - FSD Beginner, где весь сервис разбит на страницы, страницы использую общие функциональные блоки - widgets.

## Стек технологий
Frontend - React + Typescript, Mantine, MobX

Backend - NestJS, Python, NGINX, PostgreSQl, DockerCompose

ML - PyTorch, Pandas, Python, Sbert, NumPy

